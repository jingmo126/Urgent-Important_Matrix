<template>
  <div class="relative w-full h-full bg-white rounded-lg shadow-md overflow-hidden">
    <!-- åæ ‡ç³» -->
    <div class="absolute inset-0 p-8" @mouseleave="activeQuadrant.value !== 0 && resetActiveQuadrant()">
      <!-- Yè½´æ ‡ç­¾ (é‡è¦åº¦) - é»˜è®¤çŠ¶æ€ -->
      <div v-if="activeQuadrant === 0" class="absolute top-0 left-0 h-full flex items-center">
        <div class="transform -rotate-90 origin-center whitespace-nowrap text-sm font-medium text-blue-500 animate-fadeIn">
          é‡è¦åº¦
        </div>
      </div>
      
      <!-- Xè½´æ ‡ç­¾ (ç´§æ€¥åº¦) - é»˜è®¤çŠ¶æ€ -->
      <div v-if="activeQuadrant === 0" class="absolute bottom-0 left-0 w-full flex justify-center">
        <div class="text-sm font-medium text-blue-500 animate-fadeIn">ç´§æ€¥åº¦</div>
      </div>
      
      <!-- Yè½´æ ‡ç­¾ (é‡è¦åº¦) - æ”¾å¤§çŠ¶æ€ -->
      <div v-if="activeQuadrant !== 0" class="absolute top-1/4 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-20">
        <div class="text-lg font-bold text-blue-500 animate-zoom-in bg-white/80 px-3 py-1 rounded-full shadow-md">
          é‡è¦åº¦
        </div>
      </div>
      
      <!-- Xè½´æ ‡ç­¾ (ç´§æ€¥åº¦) - æ”¾å¤§çŠ¶æ€ -->
      <div v-if="activeQuadrant !== 0" class="absolute bottom-16 left-1/2 transform -translate-x-1/2 z-20">
        <div class="text-lg font-bold text-blue-500 animate-zoom-in bg-white/80 px-3 py-1 rounded-full shadow-md">ç´§æ€¥åº¦</div>
      </div>
      
      <!-- åæ ‡è½´ -->
      <svg class="absolute inset-0 w-full h-full" preserveAspectRatio="none">
        <!-- è±¡é™èƒŒæ™¯ - é»˜è®¤çŠ¶æ€ -->
        <g v-if="activeQuadrant === 0">
          <rect 
            x="50%" y="5%" width="45%" height="45%" 
            class="fill-blue-50 transition-all duration-500 cursor-pointer opacity-30 hover:opacity-50 stroke-blue-200 stroke-1"
            @mouseenter="setActiveQuadrant(1)" 
          />
          <rect 
            x="10%" y="5%" width="40%" height="45%" 
            class="fill-blue-50 transition-all duration-500 cursor-pointer opacity-30 hover:opacity-50 stroke-blue-200 stroke-1"
            @mouseenter="setActiveQuadrant(2)" 
          />
          <rect 
            x="10%" y="50%" width="40%" height="40%" 
            class="fill-blue-50 transition-all duration-500 cursor-pointer opacity-30 hover:opacity-50 stroke-blue-200 stroke-1"
            @mouseenter="setActiveQuadrant(3)" 
          />
          <rect 
            x="50%" y="50%" width="45%" height="40%" 
            class="fill-blue-50 transition-all duration-500 cursor-pointer opacity-30 hover:opacity-50 stroke-blue-200 stroke-1"
            @mouseenter="setActiveQuadrant(4)" 
          />
        </g>
        
        <!-- è±¡é™èƒŒæ™¯ - æ”¾å¤§çŠ¶æ€ -->
        <rect 
          v-if="activeQuadrant === 1"
          x="5%" y="5%" width="90%" height="85%" 
          class="fill-blue-50 transition-all duration-700 cursor-pointer opacity-80 animate-zoom-in stroke-blue-200 stroke-1"
        />
        <rect 
          v-if="activeQuadrant === 2"
          x="5%" y="5%" width="90%" height="85%" 
          class="fill-blue-50 transition-all duration-700 cursor-pointer opacity-80 animate-zoom-in stroke-blue-200 stroke-1"
        />
        <rect 
          v-if="activeQuadrant === 3"
          x="5%" y="5%" width="90%" height="85%" 
          class="fill-blue-50 transition-all duration-700 cursor-pointer opacity-80 animate-zoom-in stroke-blue-200 stroke-1"
        />
        <rect 
          v-if="activeQuadrant === 4"
          x="5%" y="5%" width="90%" height="85%" 
          class="fill-blue-50 transition-all duration-700 cursor-pointer opacity-80 animate-zoom-in stroke-blue-200 stroke-1"
        />
        
        <!-- æ°´å¹³ä¸­çº¿ (Y=5) -->
        <line 
          x1="10%" y1="50%" x2="95%" y2="50%" 
          stroke="#3B82F6" stroke-width="1.5" stroke-dasharray="4" 
          class="transition-all duration-300 animate-pulse-slow"
          :class="{'opacity-0': activeQuadrant !== 0}"
        />
        
        <!-- å‚ç›´ä¸­çº¿ (X=5) -->
        <line 
          x1="50%" y1="5%" x2="50%" y2="90%" 
          stroke="#3B82F6" stroke-width="1.5" stroke-dasharray="4" 
          class="transition-all duration-300 animate-pulse-slow"
          :class="{'opacity-0': activeQuadrant !== 0}"
        />
        
        <!-- Xè½´ - å§‹ç»ˆæ˜¾ç¤º -->
        <line 
          x1="10%" y1="90%" x2="95%" y2="90%" 
          stroke="#3B82F6" stroke-width="2"
          class="transition-all duration-500 animate-glow"
        />
        
        <!-- Yè½´ - å§‹ç»ˆæ˜¾ç¤º -->
        <line 
          x1="10%" y1="90%" x2="10%" y2="5%" 
          stroke="#3B82F6" stroke-width="2"
          class="transition-all duration-500 animate-glow"
        />
        
        <!-- Xè½´åˆ»åº¦çº¿ - é»˜è®¤çŠ¶æ€ -->
        <g v-if="activeQuadrant === 0">
          <!-- åˆ»åº¦çº¿ 1 -->
          <line x1="10%" y1="90%" x2="10%" y2="92%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="10%" y="96%" text-anchor="middle" class="text-xs fill-blue-500">0</text>
          
          <!-- åˆ»åº¦çº¿ 2 -->
          <line x1="27%" y1="90%" x2="27%" y2="92%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="27%" y="96%" text-anchor="middle" class="text-xs fill-blue-500">2</text>
          
          <!-- åˆ»åº¦çº¿ 5 -->
          <line x1="50%" y1="90%" x2="50%" y2="92%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="50%" y="96%" text-anchor="middle" class="text-xs fill-blue-500">5</text>
          
          <!-- åˆ»åº¦çº¿ 8 -->
          <line x1="78%" y1="90%" x2="78%" y2="92%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="78%" y="96%" text-anchor="middle" class="text-xs fill-blue-500">8</text>
          
          <!-- åˆ»åº¦çº¿ 10 -->
          <line x1="95%" y1="90%" x2="95%" y2="92%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="95%" y="96%" text-anchor="middle" class="text-xs fill-blue-500">10</text>
        </g>
        
        <!-- Xè½´åˆ»åº¦çº¿ - ç¬¬ä¸€è±¡é™æ”¾å¤§çŠ¶æ€ (ç´§æ€¥åº¦ 5-10) -->
        <g v-if="activeQuadrant === 1">
          <!-- åˆ»åº¦çº¿ 5 -->
          <line x1="5%" y1="90%" x2="5%" y2="92%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="5%" y="96%" text-anchor="middle" class="text-xs fill-blue-500">5</text>
          
          <!-- åˆ»åº¦çº¿ 6 -->
          <line x1="23%" y1="90%" x2="23%" y2="92%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="23%" y="96%" text-anchor="middle" class="text-xs fill-blue-500">6</text>
          
          <!-- åˆ»åº¦çº¿ 7 -->
          <line x1="41%" y1="90%" x2="41%" y2="92%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="41%" y="96%" text-anchor="middle" class="text-xs fill-blue-500">7</text>
          
          <!-- åˆ»åº¦çº¿ 8 -->
          <line x1="59%" y1="90%" x2="59%" y2="92%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="59%" y="96%" text-anchor="middle" class="text-xs fill-blue-500">8</text>
          
          <!-- åˆ»åº¦çº¿ 9 -->
          <line x1="77%" y1="90%" x2="77%" y2="92%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="77%" y="96%" text-anchor="middle" class="text-xs fill-blue-500">9</text>
          
          <!-- åˆ»åº¦çº¿ 10 -->
          <line x1="95%" y1="90%" x2="95%" y2="92%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="95%" y="96%" text-anchor="middle" class="text-xs fill-blue-500">10</text>
        </g>
        
        <!-- Xè½´åˆ»åº¦çº¿ - ç¬¬äºŒè±¡é™æ”¾å¤§çŠ¶æ€ (ç´§æ€¥åº¦ 6-10) -->
        <g v-if="activeQuadrant === 2">
          <!-- åˆ»åº¦çº¿ 6 -->
          <line x1="5%" y1="90%" x2="5%" y2="92%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="5%" y="96%" text-anchor="middle" class="text-xs fill-blue-500">6</text>
          
          <!-- åˆ»åº¦çº¿ 7 -->
          <line x1="23%" y1="90%" x2="23%" y2="92%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="23%" y="96%" text-anchor="middle" class="text-xs fill-blue-500">7</text>
          
          <!-- åˆ»åº¦çº¿ 8 -->
          <line x1="41%" y1="90%" x2="41%" y2="92%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="41%" y="96%" text-anchor="middle" class="text-xs fill-blue-500">8</text>
          
          <!-- åˆ»åº¦çº¿ 9 -->
          <line x1="59%" y1="90%" x2="59%" y2="92%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="59%" y="96%" text-anchor="middle" class="text-xs fill-blue-500">9</text>
          
          <!-- åˆ»åº¦çº¿ 10 -->
          <line x1="77%" y1="90%" x2="77%" y2="92%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="77%" y="96%" text-anchor="middle" class="text-xs fill-blue-500">10</text>
          
          <!-- åˆ»åº¦çº¿ ç´§æ€¥åº¦ä¸Šé™ -->
          <line x1="95%" y1="90%" x2="95%" y2="92%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="95%" y="96%" text-anchor="middle" class="text-xs fill-blue-500">10+</text>
        </g>
        
        <!-- Xè½´åˆ»åº¦çº¿ - ç¬¬ä¸‰è±¡é™æ”¾å¤§çŠ¶æ€ (ç´§æ€¥åº¦ 1-5) -->
        <g v-if="activeQuadrant === 3">
          <!-- åˆ»åº¦çº¿ 1 -->
          <line x1="5%" y1="90%" x2="5%" y2="92%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="5%" y="96%" text-anchor="middle" class="text-xs fill-blue-500">1</text>
          
          <!-- åˆ»åº¦çº¿ 2 -->
          <line x1="23%" y1="90%" x2="23%" y2="92%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="23%" y="96%" text-anchor="middle" class="text-xs fill-blue-500">2</text>
          
          <!-- åˆ»åº¦çº¿ 3 -->
          <line x1="41%" y1="90%" x2="41%" y2="92%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="41%" y="96%" text-anchor="middle" class="text-xs fill-blue-500">3</text>
          
          <!-- åˆ»åº¦çº¿ 4 -->
          <line x1="59%" y1="90%" x2="59%" y2="92%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="59%" y="96%" text-anchor="middle" class="text-xs fill-blue-500">4</text>
          
          <!-- åˆ»åº¦çº¿ 5 -->
          <line x1="77%" y1="90%" x2="77%" y2="92%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="77%" y="96%" text-anchor="middle" class="text-xs fill-blue-500">5</text>
          
          <!-- åˆ»åº¦çº¿ ç´§æ€¥åº¦ä¸Šé™ -->
          <line x1="95%" y1="90%" x2="95%" y2="92%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="95%" y="96%" text-anchor="middle" class="text-xs fill-blue-500">5+</text>
        </g>
        
        <!-- Xè½´åˆ»åº¦çº¿ - ç¬¬å››è±¡é™æ”¾å¤§çŠ¶æ€ (ç´§æ€¥åº¦ 6-10) -->
        <g v-if="activeQuadrant === 4">
          <!-- åˆ»åº¦çº¿ 6 -->
          <line x1="5%" y1="90%" x2="5%" y2="92%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="5%" y="96%" text-anchor="middle" class="text-xs fill-blue-500">6</text>
          
          <!-- åˆ»åº¦çº¿ 7 -->
          <line x1="23%" y1="90%" x2="23%" y2="92%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="23%" y="96%" text-anchor="middle" class="text-xs fill-blue-500">7</text>
          
          <!-- åˆ»åº¦çº¿ 8 -->
          <line x1="41%" y1="90%" x2="41%" y2="92%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="41%" y="96%" text-anchor="middle" class="text-xs fill-blue-500">8</text>
          
          <!-- åˆ»åº¦çº¿ 9 -->
          <line x1="59%" y1="90%" x2="59%" y2="92%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="59%" y="96%" text-anchor="middle" class="text-xs fill-blue-500">9</text>
          
          <!-- åˆ»åº¦çº¿ 10 -->
          <line x1="77%" y1="90%" x2="77%" y2="92%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="77%" y="96%" text-anchor="middle" class="text-xs fill-blue-500">10</text>
          
          <!-- åˆ»åº¦çº¿ ç´§æ€¥åº¦ä¸Šé™ -->
          <line x1="95%" y1="90%" x2="95%" y2="92%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="95%" y="96%" text-anchor="middle" class="text-xs fill-blue-500">10+</text>
        </g>
        
        <!-- Yè½´åˆ»åº¦çº¿ - é»˜è®¤çŠ¶æ€ -->
        <g v-if="activeQuadrant === 0">
          <!-- åˆ»åº¦çº¿ 1 -->
          <line x1="8%" y1="90%" x2="10%" y2="90%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="6%" y="90%" text-anchor="middle" dominant-baseline="middle" class="text-xs fill-blue-500">0</text>
          
          <!-- åˆ»åº¦çº¿ 2 -->
          <line x1="8%" y1="73%" x2="10%" y2="73%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="6%" y="73%" text-anchor="middle" dominant-baseline="middle" class="text-xs fill-blue-500">2</text>
          
          <!-- åˆ»åº¦çº¿ 5 -->
          <line x1="8%" y1="50%" x2="10%" y2="50%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="6%" y="50%" text-anchor="middle" dominant-baseline="middle" class="text-xs fill-blue-500">5</text>
          
          <!-- åˆ»åº¦çº¿ 8 -->
          <line x1="8%" y1="22%" x2="10%" y2="22%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="6%" y="22%" text-anchor="middle" dominant-baseline="middle" class="text-xs fill-blue-500">8</text>
          
          <!-- åˆ»åº¦çº¿ 10 -->
          <line x1="8%" y1="5%" x2="10%" y2="5%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="6%" y="5%" text-anchor="middle" dominant-baseline="middle" class="text-xs fill-blue-500">10</text>
        </g>
        
        <!-- Yè½´åˆ»åº¦çº¿ - ç¬¬ä¸€è±¡é™æ”¾å¤§çŠ¶æ€ (é‡è¦åº¦ 6-10) -->
        <g v-if="activeQuadrant === 1">
          <!-- åˆ»åº¦çº¿ 6 -->
          <line x1="8%" y1="90%" x2="10%" y2="90%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="6%" y="90%" text-anchor="middle" dominant-baseline="middle" class="text-xs fill-blue-500">6</text>
          
          <!-- åˆ»åº¦çº¿ 7 -->
          <line x1="8%" y1="73%" x2="10%" y2="73%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="6%" y="73%" text-anchor="middle" dominant-baseline="middle" class="text-xs fill-blue-500">7</text>
          
          <!-- åˆ»åº¦çº¿ 8 -->
          <line x1="8%" y1="56%" x2="10%" y2="56%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="6%" y="56%" text-anchor="middle" dominant-baseline="middle" class="text-xs fill-blue-500">8</text>
          
          <!-- åˆ»åº¦çº¿ 9 -->
          <line x1="8%" y1="39%" x2="10%" y2="39%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="6%" y="39%" text-anchor="middle" dominant-baseline="middle" class="text-xs fill-blue-500">9</text>
          
          <!-- åˆ»åº¦çº¿ 10 -->
          <line x1="8%" y1="22%" x2="10%" y2="22%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="6%" y="22%" text-anchor="middle" dominant-baseline="middle" class="text-xs fill-blue-500">10</text>
          
          <!-- åˆ»åº¦çº¿ é‡è¦åº¦ä¸Šé™ -->
          <line x1="8%" y1="5%" x2="10%" y2="5%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="6%" y="5%" text-anchor="middle" dominant-baseline="middle" class="text-xs fill-blue-500">10+</text>
        </g>
        
        <!-- Yè½´åˆ»åº¦çº¿ - ç¬¬äºŒè±¡é™æ”¾å¤§çŠ¶æ€ (é‡è¦åº¦ 6-10) -->
        <g v-if="activeQuadrant === 2">
          <!-- åˆ»åº¦çº¿ 6 -->
          <line x1="8%" y1="90%" x2="10%" y2="90%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="6%" y="90%" text-anchor="middle" dominant-baseline="middle" class="text-xs fill-blue-500">6</text>
          
          <!-- åˆ»åº¦çº¿ 7 -->
          <line x1="8%" y1="73%" x2="10%" y2="73%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="6%" y="73%" text-anchor="middle" dominant-baseline="middle" class="text-xs fill-blue-500">7</text>
          
          <!-- åˆ»åº¦çº¿ 8 -->
          <line x1="8%" y1="56%" x2="10%" y2="56%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="6%" y="56%" text-anchor="middle" dominant-baseline="middle" class="text-xs fill-blue-500">8</text>
          
          <!-- åˆ»åº¦çº¿ 9 -->
          <line x1="8%" y1="39%" x2="10%" y2="39%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="6%" y="39%" text-anchor="middle" dominant-baseline="middle" class="text-xs fill-blue-500">9</text>
          
          <!-- åˆ»åº¦çº¿ 10 -->
          <line x1="8%" y1="22%" x2="10%" y2="22%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="6%" y="22%" text-anchor="middle" dominant-baseline="middle" class="text-xs fill-blue-500">10</text>
          
          <!-- åˆ»åº¦çº¿ é‡è¦åº¦ä¸Šé™ -->
          <line x1="8%" y1="5%" x2="10%" y2="5%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="6%" y="5%" text-anchor="middle" dominant-baseline="middle" class="text-xs fill-blue-500">10+</text>
        </g>
        
        <!-- Yè½´åˆ»åº¦çº¿ - ç¬¬ä¸‰è±¡é™æ”¾å¤§çŠ¶æ€ (é‡è¦åº¦ 1-5) -->
        <g v-if="activeQuadrant === 3">
          <!-- åˆ»åº¦çº¿ 1 -->
          <line x1="8%" y1="90%" x2="10%" y2="90%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="6%" y="90%" text-anchor="middle" dominant-baseline="middle" class="text-xs fill-blue-500">1</text>
          
          <!-- åˆ»åº¦çº¿ 2 -->
          <line x1="8%" y1="73%" x2="10%" y2="73%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="6%" y="73%" text-anchor="middle" dominant-baseline="middle" class="text-xs fill-blue-500">2</text>
          
          <!-- åˆ»åº¦çº¿ 3 -->
          <line x1="8%" y1="56%" x2="10%" y2="56%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="6%" y="56%" text-anchor="middle" dominant-baseline="middle" class="text-xs fill-blue-500">3</text>
          
          <!-- åˆ»åº¦çº¿ 4 -->
          <line x1="8%" y1="39%" x2="10%" y2="39%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="6%" y="39%" text-anchor="middle" dominant-baseline="middle" class="text-xs fill-blue-500">4</text>
          
          <!-- åˆ»åº¦çº¿ 5 -->
          <line x1="8%" y1="22%" x2="10%" y2="22%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="6%" y="22%" text-anchor="middle" dominant-baseline="middle" class="text-xs fill-blue-500">5</text>
          
          <!-- åˆ»åº¦çº¿ é‡è¦åº¦ä¸Šé™ -->
          <line x1="8%" y1="5%" x2="10%" y2="5%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="6%" y="5%" text-anchor="middle" dominant-baseline="middle" class="text-xs fill-blue-500">5+</text>
        </g>
        
        <!-- Yè½´åˆ»åº¦çº¿ - ç¬¬å››è±¡é™æ”¾å¤§çŠ¶æ€ (é‡è¦åº¦ 1-5) -->
        <g v-if="activeQuadrant === 4">
          <!-- åˆ»åº¦çº¿ 1 -->
          <line x1="8%" y1="90%" x2="10%" y2="90%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="6%" y="90%" text-anchor="middle" dominant-baseline="middle" class="text-xs fill-blue-500">1</text>
          
          <!-- åˆ»åº¦çº¿ 2 -->
          <line x1="8%" y1="73%" x2="10%" y2="73%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="6%" y="73%" text-anchor="middle" dominant-baseline="middle" class="text-xs fill-blue-500">2</text>
          
          <!-- åˆ»åº¦çº¿ 3 -->
          <line x1="8%" y1="56%" x2="10%" y2="56%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="6%" y="56%" text-anchor="middle" dominant-baseline="middle" class="text-xs fill-blue-500">3</text>
          
          <!-- åˆ»åº¦çº¿ 4 -->
          <line x1="8%" y1="39%" x2="10%" y2="39%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="6%" y="39%" text-anchor="middle" dominant-baseline="middle" class="text-xs fill-blue-500">4</text>
          
          <!-- åˆ»åº¦çº¿ 5 -->
          <line x1="8%" y1="22%" x2="10%" y2="22%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="6%" y="22%" text-anchor="middle" dominant-baseline="middle" class="text-xs fill-blue-500">5</text>
          
          <!-- åˆ»åº¦çº¿ é‡è¦åº¦ä¸Šé™ -->
          <line x1="8%" y1="5%" x2="10%" y2="5%" stroke="#3B82F6" stroke-width="1.5" />
          <text x="6%" y="5%" text-anchor="middle" dominant-baseline="middle" class="text-xs fill-blue-500">5+</text>
        </g>
        
        <!-- è±¡é™æ ‡ç­¾ - é»˜è®¤çŠ¶æ€ -->
        <g v-if="activeQuadrant === 0">
          <text 
            x="25%" y="25%" 
            class="text-sm font-medium fill-important transition-all duration-500"
          >é‡è¦ä¸ç´§æ€¥</text>
          <text 
            x="25%" y="75%" 
            class="text-sm font-medium fill-gray-500 transition-all duration-500"
          >ä¸é‡è¦ä¸ç´§æ€¥</text>
          <text 
            x="75%" y="25%" 
            class="text-sm font-medium fill-danger transition-all duration-500"
          >é‡è¦ç´§æ€¥</text>
          <text 
            x="75%" y="75%" 
            class="text-sm font-medium fill-urgent transition-all duration-500"
          >ä¸é‡è¦ä½†ç´§æ€¥</text>
        </g>
        
        <!-- è±¡é™æ ‡ç­¾ - æ”¾å¤§çŠ¶æ€ -->
        <text 
          v-if="activeQuadrant === 1"
          x="50%" y="15%" 
          text-anchor="middle"
          class="text-xl font-bold fill-danger transition-all duration-700 animate-pulse-slow"
        >é‡è¦ç´§æ€¥</text>
        <text 
          v-if="activeQuadrant === 2"
          x="50%" y="15%" 
          text-anchor="middle"
          class="text-xl font-bold fill-important transition-all duration-700 animate-pulse-slow"
        >é‡è¦ä¸ç´§æ€¥</text>
        <text 
          v-if="activeQuadrant === 3"
          x="50%" y="15%" 
          text-anchor="middle"
          class="text-xl font-bold fill-gray-500 transition-all duration-700 animate-pulse-slow"
        >ä¸é‡è¦ä¸ç´§æ€¥</text>
        <text 
          v-if="activeQuadrant === 4"
          x="50%" y="15%" 
          text-anchor="middle"
          class="text-xl font-bold fill-urgent transition-all duration-700 animate-pulse-slow"
        >ä¸é‡è¦ä½†ç´§æ€¥</text>
      </svg>
      
      <!-- ä»»åŠ¡ç‚¹ç»„ -->
      <div 
        v-for="group in taskGroups" 
        :key="`group-${group.x}-${group.y}`"
        class="absolute rounded-full shadow-md transform -translate-x-1/2 -translate-y-1/2 cursor-pointer transition-all duration-700 hover:scale-125 z-10 animate-pop-in"
        :class="[
          group.tasks.length === 1 ? getTaskColor(group.tasks[0]) : 'bg-blue-500',
          activeQuadrant !== 0 ? 'scale-150 z-20 ring-2 ring-white' : 'scale-100'
        ]"
        :style="{
            left: group.x,
            top: group.y,
            width: activeQuadrant !== 0 ? '36px' : '24px',
            height: activeQuadrant !== 0 ? '36px' : '24px',
            'animation-delay': group.tasks[0].id * 100 + 'ms'
          }"
        @click="group.tasks.length === 1 ? editTask(group.tasks[0]) : showTaskList(group)"
         @mouseenter="handleGroupMouseEnter(group)"
         @mouseleave="handleGroupMouseLeave()"
      >
        <!-- å•ä¸ªä»»åŠ¡æ˜¾ç¤ºå¿ƒæƒ…å›¾æ ‡ -->
        <span v-if="group.tasks.length === 1" class="absolute top-0 left-0 w-full h-full flex items-center justify-center text-lg">
          {{ moodEmojis[group.tasks[0].mood] || moodEmojis.smile }}
        </span>
        <!-- å¤šä¸ªä»»åŠ¡æ˜¾ç¤ºæ•°é‡ -->
        <span v-else class="absolute top-0 left-0 w-full h-full flex items-center justify-center text-xs font-bold text-white">
          {{ group.tasks.length }}
        </span>
        <!-- ä¼˜å…ˆçº§æŒ‡ç¤ºå™¨ -->
        <div 
          class="absolute -bottom-2 left-1/2 transform -translate-x-1/2 h-1 rounded-full transition-all duration-700"
          :class="group.tasks.length === 1 ? getPriorityBarColor(group.tasks[0]) : 'bg-blue-300'"
          :style="{width: `${Math.max(20, group.tasks.length === 1 ? group.tasks[0].priority * 4 : 32)}px`}"
        ></div>
      </div>
      
      <!-- åº•éƒ¨æç¤ºä¿¡æ¯ -->
      <div 
        v-if="activeQuadrant !== 0" 
        class="absolute bottom-4 left-0 right-0 text-center text-sm text-blue-600 font-medium bg-blue-50 py-2 px-4 rounded-md mx-auto w-auto max-w-xs animate-fade-in shadow-md flex items-center justify-center space-x-2"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-500 animate-pulse-slow" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <span>å½“å‰æ­£åœ¨æŸ¥çœ‹<span class="font-bold">{{ getQuadrantName(activeQuadrant) }}</span>è±¡é™ï¼Œ<span class="font-bold">å°†é¼ æ ‡ç§»å‡ºæ•´ä¸ªåæ ‡ç³»</span>å¯è¿”å›å…¨å±€è§†å›¾</span>
      </div>
      
      <!-- å•ä»»åŠ¡ä¿¡æ¯æç¤ºæ¡† -->
      <div 
        v-if="hoveredTask && (activeQuadrant === 0 || getTaskQuadrant(hoveredTask) === activeQuadrant)" 
        class="absolute z-30 bg-white rounded-md shadow-lg p-4 w-64 text-sm animate-fade-in border-l-4 transition-all duration-700"
        :class="getTaskBorderColor(hoveredTask)"
        :style="{
          left: getTooltipPositionX(hoveredTask),
          top: getTooltipPositionY(hoveredTask)
        }"
      >
        <div class="font-medium text-gray-900 text-base flex items-center">
          <span class="mr-2">{{ moodEmojis[hoveredTask.mood] || moodEmojis.smile }}</span>
          {{ hoveredTask.title }}
        </div>
        <div v-if="hoveredTask.description" class="text-gray-600 mt-2 text-xs">{{ hoveredTask.description }}</div>
        <div class="flex justify-between mt-3 text-xs font-medium">
          <span class="px-2 py-1 rounded-full bg-blue-100 text-blue-800">é‡è¦åº¦: {{ hoveredTask.importance }}</span>
          <span class="px-2 py-1 rounded-full bg-blue-100 text-blue-800">ç´§æ€¥åº¦: {{ hoveredTask.urgency }}</span>
        </div>
        <div class="text-xs font-medium mt-2 flex items-center">
          <span class="mr-2">ä¼˜å…ˆçº§:</span>
          <div class="w-full bg-gray-200 rounded-full h-2">
            <div 
              class="h-2 rounded-full transition-all duration-500 animate-pulse-slow"
              :class="getPriorityBarColor(hoveredTask)"
              :style="{width: `${hoveredTask.priority * 10}%`}"
            ></div>
          </div>
          <span class="ml-2">{{ hoveredTask.priority.toFixed(1) }}</span>
        </div>
      </div>
      
      <!-- å¤šä»»åŠ¡åˆ—è¡¨æç¤ºæ¡† -->
      <div 
        v-if="hoveredTaskGroup" 
        class="absolute z-30 bg-white rounded-md shadow-lg p-4 w-72 text-sm animate-fade-in border-l-4 border-blue-500"
        :style="{
          left: hoveredTaskGroup.x,
          top: hoveredTaskGroup.y,
          transform: 'translate(20px, -50%)'
        }"
      >
        <div class="font-medium text-gray-900 text-base mb-3">
          æ­¤ä½ç½®å…±æœ‰ {{ hoveredTaskGroup.tasks.length }} ä¸ªä»»åŠ¡
        </div>
        <div class="max-h-48 overflow-y-auto space-y-2">
          <div 
            v-for="task in hoveredTaskGroup.tasks" 
            :key="task.id"
            class="p-2 bg-gray-50 rounded border-l-2 hover:bg-gray-100 cursor-pointer transition-colors"
            :class="getTaskBorderColor(task)"
            @click="editTask(task)"
          >
            <div class="font-medium text-gray-800 flex items-center">
              <span class="mr-2">{{ moodEmojis[task.mood] || moodEmojis.smile }}</span>
              {{ task.title }}
            </div>
            <div class="text-xs text-gray-600 mt-1 flex justify-between">
              <span>é‡è¦åº¦: {{ task.importance }}</span>
              <span>ç´§æ€¥åº¦: {{ task.urgency }}</span>
              <span>ä¼˜å…ˆçº§: {{ task.priority.toFixed(1) }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- æ·»åŠ æŒ‰é’® -->
    <button 
      v-if="editMode"
      @click="$emit('add-task')"
      class="absolute bottom-4 right-4 bg-primary text-white rounded-full p-3 shadow-lg hover:bg-blue-600 transition-all duration-300 hover:scale-110 z-30 animate-bounce-slow"
    >
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
      </svg>
    </button>
    
    <!-- ç¼©æ”¾æ§åˆ¶æŒ‰é’® -->
    <div class="absolute top-4 right-4 flex space-x-2 z-30">
      <button 
        @click="resetActiveQuadrant"
        class="bg-white text-gray-700 rounded-full p-2 shadow-md hover:bg-gray-100 transition-all duration-300 hover:scale-110"
        :class="{'bg-primary text-white': activeQuadrant === 0}"
        title="é‡ç½®è§†å›¾"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" />
        </svg>
      </button>
      
      <!-- é¼ æ ‡æ‚¬åœæ”¾å¤§å¼€å…³ -->
      <button 
        @click="hoverZoomEnabled = !hoverZoomEnabled"
        class="bg-white text-gray-700 rounded-full p-2 shadow-md hover:bg-gray-100 transition-all duration-300 hover:scale-110"
        :class="{'bg-primary text-white': hoverZoomEnabled}"
        title="é¼ æ ‡æ‚¬åœæ”¾å¤§å¼€å…³"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7" />
        </svg>
      </button>
    </div>
  </div>
</template>

<script setup>
import { ref, computed } from 'vue';

const props = defineProps({
  tasks: {
    type: Array,
    default: () => []
  },
  editMode: {
    type: Boolean,
    default: false
  }
});

const emit = defineEmits(['edit-task', 'add-task']);
const hoveredTask = ref(null);
const hoveredTaskGroup = ref(null);
const activeQuadrant = ref(0); // 0è¡¨ç¤ºæ— æ´»åŠ¨è±¡é™ï¼Œ1-4è¡¨ç¤ºå››ä¸ªè±¡é™
const hoverZoomEnabled = ref(false); // æ§åˆ¶é¼ æ ‡æ‚¬åœæ”¾å¤§è±¡é™äº‹ä»¶çš„å¼€å…³

// å¿ƒæƒ…è¡¨æƒ…æ˜ å°„
const moodEmojis = {
  smile: 'ğŸ˜Š',
  sad: 'ğŸ˜¢', 
  struggle: 'ğŸ’ª',
  shy: 'ğŸ˜³',
  think: 'ğŸ¤”'
};

// è®¡ç®—é‡å ä»»åŠ¡ç»„
const taskGroups = computed(() => {
  const groups = new Map();
  const currentTasks = activeQuadrant.value === 0 ? props.tasks : tasksInActiveQuadrant.value;
  
  currentTasks.forEach(task => {
    const x = getTaskPositionX(task);
    const y = getTaskPositionY(task);
    const key = `${x}-${y}`;
    
    if (!groups.has(key)) {
      groups.set(key, {
        x,
        y,
        tasks: [],
        position: { x, y }
      });
    }
    groups.get(key).tasks.push(task);
  });
  
  return Array.from(groups.values());
});

// è®¾ç½®æ´»åŠ¨è±¡é™
function setActiveQuadrant(quadrant) {
  // åªæœ‰å½“å¼€å…³å¯ç”¨æ—¶ï¼Œæ‰å…è®¸é€šè¿‡é¼ æ ‡æ‚¬åœè®¾ç½®æ´»åŠ¨è±¡é™
  if (hoverZoomEnabled.value || activeQuadrant.value !== 0) {
    activeQuadrant.value = quadrant;
  }
}

// é‡ç½®æ´»åŠ¨è±¡é™
function resetActiveQuadrant() {
  activeQuadrant.value = 0;
}

// åˆ¤æ–­ä»»åŠ¡æ˜¯å¦åœ¨æ´»åŠ¨è±¡é™ä¸­
function isTaskInActiveQuadrant(task) {
  if (activeQuadrant.value === 0) return false;
  
  const quadrant = getTaskQuadrant(task);
  return quadrant === activeQuadrant.value;
}

// è·å–å½“å‰è±¡é™ä¸­çš„ä»»åŠ¡
const tasksInActiveQuadrant = computed(() => {
  if (activeQuadrant.value === 0) return [];
  return props.tasks.filter(task => getTaskQuadrant(task) === activeQuadrant.value);
});

// è·å–ä»»åŠ¡æ‰€åœ¨è±¡é™
function getTaskQuadrant(task) {
  const importance = task.importance;
  const urgency = task.urgency;
  
  // ç‰¹æ®Šå¤„ç†åæ ‡å€¼ä¸º[5,5]çš„ç‚¹ï¼Œåªåœ¨ç¬¬ä¸€è±¡é™æ˜¾ç¤º
  if (importance === 5 && urgency === 5) return 1; // [5,5]çš„ç‚¹åªåœ¨ç¬¬ä¸€è±¡é™æ˜¾ç¤º
  
  if (importance > 5 && urgency >= 5) return 1; // é‡è¦ç´§æ€¥ï¼ˆç¬¬ä¸€è±¡é™ï¼Œå³ä¸Šè§’ï¼‰
  if (importance >= 5 && urgency < 5) return 2; // é‡è¦ä¸ç´§æ€¥ï¼ˆç¬¬äºŒè±¡é™ï¼Œå·¦ä¸Šè§’ï¼‰
  if (importance < 5 && urgency < 5) return 3; // ä¸é‡è¦ä¸ç´§æ€¥ï¼ˆç¬¬ä¸‰è±¡é™ï¼Œå·¦ä¸‹è§’ï¼‰
  if (importance < 5 && urgency >= 5) return 4; // ä¸é‡è¦ä½†ç´§æ€¥ï¼ˆç¬¬å››è±¡é™ï¼Œå³ä¸‹è§’ï¼‰
  return 0; // é»˜è®¤è¿”å›å…¨å±€è§†å›¾
}

// æ ¹æ®ä»»åŠ¡çš„ä¼˜å…ˆçº§è·å–é¢œè‰²
function getTaskColor(task) {
  const priority = task.priority;
  
  if (priority >= 8) return 'bg-danger';
  if (priority >= 6) return 'bg-warning';
  if (priority >= 4) return 'bg-primary';
  return 'bg-gray-500';
}

// è·å–ä»»åŠ¡è¾¹æ¡†é¢œè‰²
function getTaskBorderColor(task) {
  const priority = task.priority;
  
  if (priority >= 8) return 'border-danger';
  if (priority >= 6) return 'border-warning';
  if (priority >= 4) return 'border-primary';
  return 'border-gray-500';
}

// è·å–ä¼˜å…ˆçº§è¿›åº¦æ¡é¢œè‰²
function getPriorityBarColor(task) {
  const priority = task.priority;
  
  if (priority >= 8) return 'bg-danger';
  if (priority >= 6) return 'bg-warning';
  if (priority >= 4) return 'bg-primary';
  return 'bg-gray-500';
}

// è·å–ä»»åŠ¡Xåæ ‡ä½ç½®
function getTaskPositionX(task) {
  if (activeQuadrant.value === 0) {
    // é»˜è®¤è§†å›¾ä¸‹çš„ä½ç½®
    return `${10 + (task.urgency - 1) * 8.5}%`;
  } else {
    // æ”¾å¤§è§†å›¾ä¸‹çš„ä½ç½®
    const quadrant = getTaskQuadrant(task);
    
    // ç¡®ä¿åªè®¡ç®—å½“å‰æ´»åŠ¨è±¡é™çš„ä»»åŠ¡ä½ç½®
    if (quadrant !== activeQuadrant.value) {
      return '50%'; // éå½“å‰è±¡é™çš„ä»»åŠ¡ä¸åº”æ˜¾ç¤ºï¼Œä½†ä¸ºé˜²æ­¢é”™è¯¯ï¼Œè¿”å›ä¸­å¿ƒä½ç½®
    }
    
    // åœ¨æ”¾å¤§è§†å›¾ä¸­ï¼Œå°†ä»»åŠ¡ç‚¹æ˜ å°„åˆ°æ›´é›†ä¸­çš„å¯è§åŒºåŸŸï¼ˆ25%-75%ï¼‰
    // ç¬¬ä¸€è±¡é™ï¼šæ¨ªè½´èŒƒå›´5-10
    // ç¬¬äºŒè±¡é™ï¼šæ¨ªè½´èŒƒå›´0-5
    // ç¬¬ä¸‰è±¡é™ï¼šæ¨ªè½´èŒƒå›´0-5
    // ç¬¬å››è±¡é™ï¼šæ¨ªè½´èŒƒå›´5-10
    if (quadrant === 1) { // ç¬¬ä¸€è±¡é™ï¼ˆå³ä¸Šè§’ï¼‰
      // å°†urgency 5-10æ˜ å°„åˆ°25%-75%
      return `${25 + (task.urgency - 5) * (50 / 5)}%`;
    } else if (quadrant === 2) { // ç¬¬äºŒè±¡é™ï¼ˆå·¦ä¸Šè§’ï¼‰
      // å°†urgency 0-5æ˜ å°„åˆ°25%-75%
      return `${25 + task.urgency * (50 / 5)}%`;
    } else if (quadrant === 3) { // ç¬¬ä¸‰è±¡é™ï¼ˆå·¦ä¸‹è§’ï¼‰
      // å°†urgency 0-5æ˜ å°„åˆ°25%-75%
      return `${25 + task.urgency * (50 / 5)}%`;
    } else if (quadrant === 4) { // ç¬¬å››è±¡é™ï¼ˆå³ä¸‹è§’ï¼‰
      // å°†urgency 5-10æ˜ å°„åˆ°25%-75%
      return `${25 + (task.urgency - 5) * (50 / 5)}%`;
    }
  }
  
  return `${50}%`; // é»˜è®¤è¿”å›ä¸­å¿ƒä½ç½®
}

// è·å–ä»»åŠ¡Yåæ ‡ä½ç½®
function getTaskPositionY(task) {
  if (activeQuadrant.value === 0) {
    // é»˜è®¤è§†å›¾ä¸‹çš„ä½ç½®
    return `${90 - (task.importance - 1) * 8.5}%`;
  } else {
    // æ”¾å¤§è§†å›¾ä¸‹çš„ä½ç½®
    const quadrant = getTaskQuadrant(task);
    
    // ç¡®ä¿åªè®¡ç®—å½“å‰æ´»åŠ¨è±¡é™çš„ä»»åŠ¡ä½ç½®
    if (quadrant !== activeQuadrant.value) {
      return '50%'; // éå½“å‰è±¡é™çš„ä»»åŠ¡ä¸åº”æ˜¾ç¤ºï¼Œä½†ä¸ºé˜²æ­¢é”™è¯¯ï¼Œè¿”å›ä¸­å¿ƒä½ç½®
    }
    
    // åœ¨æ”¾å¤§è§†å›¾ä¸­ï¼Œå°†ä»»åŠ¡ç‚¹æ˜ å°„åˆ°æ›´é›†ä¸­çš„å¯è§åŒºåŸŸï¼ˆ25%-75%ï¼‰
    // ç¬¬ä¸€è±¡é™ï¼šçºµè½´èŒƒå›´5-10
    // ç¬¬äºŒè±¡é™ï¼šçºµè½´èŒƒå›´5-10
    // ç¬¬ä¸‰è±¡é™ï¼šçºµè½´èŒƒå›´0-5
    // ç¬¬å››è±¡é™ï¼šçºµè½´èŒƒå›´0-5
    if (quadrant === 1 || quadrant === 2) { // ä¸Šæ–¹è±¡é™ï¼ˆé‡è¦ï¼‰
      // å°†importance 5-10æ˜ å°„åˆ°25%-75%
      return `${25 + (10 - task.importance) * (50 / 5)}%`;
    } else if (quadrant === 3 || quadrant === 4) { // ä¸‹æ–¹è±¡é™ï¼ˆä¸é‡è¦ï¼‰
      // å°†importance 0-5æ˜ å°„åˆ°25%-75%
      return `${25 + (5 - task.importance) * (50 / 5)}%`;
    }
  }
  
  return `${50}%`; // é»˜è®¤è¿”å›ä¸­å¿ƒä½ç½®
}


// è·å–æç¤ºæ¡†Xåæ ‡ä½ç½®
function getTooltipPositionX(task) {
  if (activeQuadrant.value === 0) {
    return `${Math.min(85, 10 + (task.urgency - 1) * 8.5)}%`;
  } else {
    // æ”¾å¤§è§†å›¾ä¸‹ï¼Œæç¤ºæ¡†ä½ç½®éœ€è¦è°ƒæ•´
    const quadrant = getTaskQuadrant(task);
    
    // ç¡®ä¿åªè®¡ç®—å½“å‰æ´»åŠ¨è±¡é™çš„ä»»åŠ¡æç¤ºæ¡†ä½ç½®
    if (quadrant !== activeQuadrant.value) {
      return '50%'; // éå½“å‰è±¡é™çš„ä»»åŠ¡ä¸åº”æ˜¾ç¤ºï¼Œä½†ä¸ºé˜²æ­¢é”™è¯¯ï¼Œè¿”å›ä¸­å¿ƒä½ç½®
    }
    
    if (quadrant === 1 || quadrant === 4) { // å³ä¾§è±¡é™ï¼ˆç´§æ€¥ï¼‰
      // å°†urgency 5-10æ˜ å°„åˆ°æç¤ºæ¡†ä½ç½®
      const position = 25 + (task.urgency - 5) * (50 / 5);
      // ç¡®ä¿æç¤ºæ¡†ä¸ä¼šè¶…å‡ºè¾¹ç•Œ
      return `${Math.min(70, position + 5)}%`;
    } else if (quadrant === 2 || quadrant === 3) { // å·¦ä¾§è±¡é™ï¼ˆä¸ç´§æ€¥ï¼‰
      // å°†urgency 1-5æ˜ å°„åˆ°æç¤ºæ¡†ä½ç½®
      const position = 25 + (task.urgency - 1) * (50 / 4);
      // ç¡®ä¿æç¤ºæ¡†ä¸ä¼šè¶…å‡ºè¾¹ç•Œ
      return `${Math.min(70, position + 5)}%`;
    }
    return `50%`; // é»˜è®¤è¿”å›ä¸­å¿ƒä½ç½®
  }
}

// è·å–æç¤ºæ¡†Yåæ ‡ä½ç½®
function getTooltipPositionY(task) {
  if (activeQuadrant.value === 0) {
    return `${Math.min(80, 90 - (task.importance - 1) * 8.5)}%`;
  } else {
    // æ”¾å¤§è§†å›¾ä¸‹ï¼Œæç¤ºæ¡†ä½ç½®éœ€è¦è°ƒæ•´
    const quadrant = getTaskQuadrant(task);
    
    // ç¡®ä¿åªè®¡ç®—å½“å‰æ´»åŠ¨è±¡é™çš„ä»»åŠ¡æç¤ºæ¡†ä½ç½®
    if (quadrant !== activeQuadrant.value) {
      return '50%'; // éå½“å‰è±¡é™çš„ä»»åŠ¡ä¸åº”æ˜¾ç¤ºï¼Œä½†ä¸ºé˜²æ­¢é”™è¯¯ï¼Œè¿”å›ä¸­å¿ƒä½ç½®
    }
    
    if (quadrant === 1 || quadrant === 2) { // ä¸Šæ–¹è±¡é™ï¼ˆé‡è¦ï¼‰
      // å°†importance 5-10æ˜ å°„åˆ°æç¤ºæ¡†ä½ç½®
      const position = 25 + (10 - task.importance) * (50 / 5);
      // ç¡®ä¿æç¤ºæ¡†ä¸ä¼šè¶…å‡ºè¾¹ç•Œ
      return `${Math.min(70, position + 5)}%`;
    } else if (quadrant === 3 || quadrant === 4) { // ä¸‹æ–¹è±¡é™ï¼ˆä¸é‡è¦ï¼‰
      // å°†importance 1-5æ˜ å°„åˆ°æç¤ºæ¡†ä½ç½®
      const position = 25 + (5 - task.importance) * (50 / 4);
      // ç¡®ä¿æç¤ºæ¡†ä¸ä¼šè¶…å‡ºè¾¹ç•Œ
      return `${Math.min(70, position + 5)}%`;
    }
    return `50%`; // é»˜è®¤è¿”å›ä¸­å¿ƒä½ç½®
  }
}

// è·å–è±¡é™åç§°
function getQuadrantName(quadrant) {
  switch (quadrant) {
    case 1: return 'é‡è¦ç´§æ€¥';
    case 2: return 'é‡è¦ä¸ç´§æ€¥';
    case 3: return 'ä¸é‡è¦ä½†ç´§æ€¥';
    case 4: return 'ä¸é‡è¦ä¸ç´§æ€¥';
    default: return '';
  }
}

// å¤„ç†ä»»åŠ¡ç»„é¼ æ ‡è¿›å…¥äº‹ä»¶
function handleGroupMouseEnter(group) {
  if (group.tasks.length === 1) {
    hoveredTask.value = group.tasks[0];
    hoveredTaskGroup.value = null;
  } else {
    hoveredTask.value = null;
    hoveredTaskGroup.value = group;
  }
}

// å¤„ç†ä»»åŠ¡ç»„é¼ æ ‡ç¦»å¼€äº‹ä»¶
function handleGroupMouseLeave() {
  hoveredTask.value = null;
  hoveredTaskGroup.value = null;
}

// æ˜¾ç¤ºä»»åŠ¡åˆ—è¡¨ï¼ˆå¤šä»»åŠ¡ç‚¹å‡»æ—¶ï¼‰
function showTaskList(group) {
  if (!props.editMode) return;
  // å¯ä»¥æ˜¾ç¤ºä¸€ä¸ªä»»åŠ¡é€‰æ‹©å¯¹è¯æ¡†ï¼Œè¿™é‡Œæš‚æ—¶é€‰æ‹©ç¬¬ä¸€ä¸ªä»»åŠ¡
  if (group.tasks.length > 0) {
    emit('edit-task', group.tasks[0]);
  }
}

// ç¼–è¾‘ä»»åŠ¡
function editTask(task) {
  if (!props.editMode) return;
  emit('edit-task', task);
}
</script>

<style>
/* åŠ¨ç”»æ•ˆæœ */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes popIn {
  0% { transform: scale(0) translate(-50%, -50%); }
  70% { transform: scale(1.2) translate(-50%, -50%); }
  100% { transform: scale(1) translate(-50%, -50%); }
}

@keyframes drawX {
  from { stroke-dasharray: 1000; stroke-dashoffset: 1000; }
  to { stroke-dasharray: 1000; stroke-dashoffset: 0; }
}

@keyframes drawY {
  from { stroke-dasharray: 1000; stroke-dashoffset: 1000; }
  to { stroke-dasharray: 1000; stroke-dashoffset: 0; }
}

@keyframes pulseSlow {
  0% { opacity: 0.7; }
  50% { opacity: 1; }
  100% { opacity: 0.7; }
}

@keyframes bounceSlow {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

@keyframes glow {
  0% { filter: drop-shadow(0 0 2px rgba(59, 130, 246, 0.3)); }
  50% { filter: drop-shadow(0 0 5px rgba(59, 130, 246, 0.6)); }
  100% { filter: drop-shadow(0 0 2px rgba(59, 130, 246, 0.3)); }
}

@keyframes zoomIn {
  0% { transform: scale(0.8); opacity: 0; }
  100% { transform: scale(1); opacity: 1; }
}

.animate-fadeIn {
  animation: fadeIn 1s ease-out;
}

.animate-pop-in {
  animation: popIn 0.5s ease-out forwards;
}

.animate-draw-x {
  animation: drawX 1.5s ease-out forwards;
}

.animate-draw-y {
  animation: drawY 1.5s ease-out forwards;
}

.animate-fade-in {
  animation: fadeIn 0.5s ease-out forwards;
}

.animate-pulse-slow {
  animation: pulseSlow 3s infinite;
}

.animate-bounce-slow {
  animation: bounceSlow 2s infinite;
}

.animate-glow {
  animation: glow 3s infinite;
}

.animate-zoom-in {
  animation: zoomIn 0.7s ease-out forwards;
}
</style>